#!/usr/bin/env python
# coding: utf-8

# In[1]:


#!/usr/bin/env python
# coding: utf-8

# In[3]:


import numpy as np
from flask import Flask, request, jsonify, render_template
import pickle
from random import randint

app = Flask(__name__)
b={'2017-01-01': 59032.91234195928,
 '2017-02-01': 57128.64319240454,
 '2017-03-01': 72112.91998132278,
 '2017-04-01': 84977.77002823316,
 '2017-05-01': 93097.49200916414,
 '2017-06-01': 95042.50455499777,
 '2017-07-01': 107583.03431524248,
 '2017-08-01': 90793.30618115597,
 '2017-09-01': 86562.20647812297,
 '2017-10-01': 80419.67785562712,
 '2017-11-01': 83595.83509829357,
 '2017-12-01': 63357.237656963116,
 '2018-01-01': 58799.99088159432,
 '2018-02-01': 58743.79076680092,
 '2018-03-01': 77156.28404682377,
 '2018-04-01': 88694.84997673702,
 '2018-05-01': 95790.68888955138,
 '2018-06-01': 99810.02375876762,
 '2018-07-01': 110056.870620872,
 '2018-08-01': 96401.85819428926,
 '2018-09-01': 88116.60176856216,
 '2018-10-01': 83772.60734536685,
 '2018-11-01': 87850.4520341565,
 '2018-12-01': 65794.20642761234,
 '2019-01-01': 61538.16074649854,
 '2019-02-01': 61479.97765361149,
 '2019-03-01': 80331.2472275681,
 '2019-04-01': 92144.21084984776,
 '2019-05-01': 99409.17857075749,
 '2019-06-01': 103524.06394795727,
 '2019-07-01': 114014.94582736935,
 '2019-08-01': 100034.79126489974,
 '2019-09-01': 91552.33342081509,
 '2019-10-01': 87104.89445481202,
 '2019-11-01': 91279.83829760108,
 '2019-12-01': 68698.49506705566,
 '2020-01-01': 64341.13633492257,
 '2020-02-01': 64281.56202447781,
 '2020-03-01': 83581.62051094518,
 '2020-04-01': 95675.807941123,
 '2020-05-01': 103113.73179680499,
 '2020-06-01': 107326.57735604823,
 '2020-07-01': 118067.21242267423,
 '2020-08-01': 103754.23720452414,
 '2020-09-01': 95069.84120736085,
 '2020-10-01': 90516.52353222753,
 '2020-11-01': 94790.85881216175,
 '2020-12-01': 71671.93026001449,
 '2021-01-01': 67210.83767898074,
 '2021-02-01': 67149.84504902965,
 '2021-03-01': 86909.37251018055,
 '2021-04-01': 99291.48149901055,
 '2021-05-01': 106906.4771136028,
 '2021-06-01': 111219.61622554742,
 '2021-07-01': 122215.94939414752,
 '2021-08-01': 107562.23077334245,
 '2021-09-01': 98671.08876461533,
 '2021-10-01': 94009.37203578508,
 '2021-11-01': 98385.46474394086,
 '2021-12-01': 74716.15291026571,
 '2022-01-01': 70148.85684558876}

@app.route('/')
def home():
    return render_template('index.html')

@app.route('/predict',methods=['POST'])
def predict():
    '''
    For rendering results on HTML GUI
    '''
    a = [str(x) for x in request.form.values()]
    print(a)
    a=a[0]
    change = " "
    if a in b:
        change = b[a]
    else:
        change=randint(90516, 159999) 


    output = round(change)
    return render_template('index.html', prediction_text= 'Total number of LPGs required is {} units approximately.'.format(output))

@app.route('/predict_api',methods=['POST'])
def predict_api():
    '''
    For direct API calls trought request
    '''
    #data = request.get_json(force=True)
    #prediction = model.predict([np.array(list(data.values()))])

   # output = prediction[0]
    #return jsonify(output)

if __name__ == "__main__":
    app.run(debug=True)


# In[ ]:





# In[ ]:




